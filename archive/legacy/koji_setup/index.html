
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The wiki for the Rocky Linux project">
      
      
      
        <link rel="canonical" href="https://wiki.rockylinux.org/archive/legacy/koji_setup/">
      
      
        <link rel="prev" href="../koji_bootstrap/">
      
      
        <link rel="next" href="../mbs_installation/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Koji setup - Rocky Linux Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Rocky Linux Wiki" class="md-header__button md-logo" aria-label="Rocky Linux Wiki" data-md-component="logo">
      
  <img src="../../../assets/icon-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rocky Linux Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Koji setup
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/rocky-linux/wiki.rockylinux.org" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    rocky-linux/wiki.rockylinux.org
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../links/" class="md-tabs__link">
        
  
  
    
  
  Link Directory

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../irc/" class="md-tabs__link">
        
  
  
    
  
  General Chat and IRC

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../rocky/" class="md-tabs__link">
          
  
  
    
  
  Rocky Linux

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../guidelines/bug_tracker_guidelines/" class="md-tabs__link">
          
  
  
    
  
  Guidelines

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../special_interest_groups/" class="md-tabs__link">
          
  
  
    
  
  Special Interest Groups

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../team/" class="md-tabs__link">
          
  
  
    
  
  Teams

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../events/" class="md-tabs__link">
          
  
  
    
  
  Events

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../contributing/" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Archive

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Rocky Linux Wiki" class="md-nav__button md-logo" aria-label="Rocky Linux Wiki" data-md-component="logo">
      
  <img src="../../../assets/icon-white.svg" alt="logo">

    </a>
    Rocky Linux Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rocky-linux/wiki.rockylinux.org" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    rocky-linux/wiki.rockylinux.org
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Link Directory
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../irc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Chat and IRC
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../rocky/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Rocky Linux
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Rocky Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Community Help & Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/bugs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reporting Bugs and RFE's
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/errata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Linux Errata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Linux ISOs and Images
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Linux Repositories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/rss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Linux RSS Feeds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Linux Release and Version Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../rocky/packagekit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PackageKit Missing Items
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guidelines
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Guidelines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guidelines/bug_tracker_guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bug Tracker Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guidelines/git_guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guidelines/maillist_guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RESF Mailing List Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../special_interest_groups/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Special Interest Groups
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Special Interest Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../special_interest_groups/current/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Current SIGs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../special_interest_groups/sig_guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    SIG Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            SIG Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../special_interest_groups/sig_guide/proposal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proposing a SIG
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../special_interest_groups/sig_guide/content/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing Content
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../special_interest_groups/sig_guide/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Packages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../special_interest_groups/sig_guide/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automated Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../special_interest_groups/sig_guide/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Releasing Packages
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Teams
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Teams
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/infrastructure/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Infrastructure Team
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure Team
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/infrastructure/idm_pdr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PDR Delete Request
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/release_engineering/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Release Engineering Team
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Release Engineering Team
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/testing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Testing Team
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            Testing Team
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/design/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Design Team
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_5">
            <span class="md-nav__icon md-icon"></span>
            Design Team
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/community/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Community Team
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            Community Team
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/meeting-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community Meeting Notes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/past-events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Past Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_6_5" >
        
          
          <label class="md-nav__link" for="__nav_7_6_5" id="__nav_7_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Event Reports
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6_5">
            <span class="md-nav__icon md-icon"></span>
            Event Reports
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/23SELF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SouthEast LinuxFest ‘23
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/24FOSDEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FOSDEM 2024 with CentOS Connect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/24GUADEC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GUADEC Denver 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/24SELF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SouthEast LinuxFest 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/24flock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flock to Fedora Report 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/24hacktoberfest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hacktoberfest 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/24nerdearla/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NERDEARLA ‘24 10mo Aniversario
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../team/community/event-reports/FOSDEM_2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CentOS Connect &amp; FOSDEM 2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../team/documentation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Documentation Team
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_7">
            <span class="md-nav__icon md-icon"></span>
            Documentation Team
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../events/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../contributing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Linux Git Contributor Agreement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/rosca/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Open Source Contributor Agreement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Legacy
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10_2" id="__nav_10_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10_2">
            <span class="md-nav__icon md-icon"></span>
            Legacy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8_4_package_errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Release 8.4 Package Errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap_i686/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bootstrap i686
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build_steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocky Build Process Overview (Revised)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../external_package_space/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    External Package Scratch Space
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Frequently Asked Questions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hidden_deps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hidden / External Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../koji_bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Koji Bootstrap (setup)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Koji setup
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mbs_installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module-build-service "mbs" setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mock_building_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mock building guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modularity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modularity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../module_build_order/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Build Order
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mqtt_bus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CentOS MQTT message bus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package_debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Help - Getting Started with Package Debugs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package_error_tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Package Build Issues Tracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package_error_tracking_older/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Package Build Issues Tracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../packaging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Packaging
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/rocky-linux/wiki.rockylinux.org/edit/development/docs/archive/legacy/koji_setup.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>This how-to is WIP and based on https://docs.pagure.org/koji/</p>
<p>The setup is as follows:
* CentOS-8 installed
* Firewall allowing communication between the hosts
* Public network for access and private network for koji and kerberos communication between hosts
* koji.gnulab.org/10.10.10.2 hosts koji, kojiweb, koji-hub,kojira, kerberos server, kerberos workstation "for testing"
* builder1.gnulab.org/10.10.10.3 hosts kojid building daemon and kerberos workstation "for testing"
* Your location machine should have kerberos workstation as well and a browser configured to use kerberos
* SSL is setup for web facing services using let's encrypt, you need to sort this one out</p>
<h1 id="getting-kerberos-up-and-running">Getting kerberos up and running<a class="headerlink" href="#getting-kerberos-up-and-running" title="Permanent link">&para;</a></h1>
<p>!!!THIS IS A QUICK GUIDE FOR TESTING ONLY!!!</p>
<p>You will need to install kerberos for this setup, however I assume IPA will be in place and will be used</p>
<p>On the koji.gnulab.org machine do the following:
* Install he needed packages:
<code>dnf install krb5-server.x86_64 krb5-workstation.x86_64 -y</code>
* Edit <strong>/etc/krb5.conf</strong> to look like that
<div class="highlight"><pre><span></span><code># To opt out of the system crypto-policies configuration of krb5, remove the
# symlink at /etc/krb5.conf.d/crypto-policies which will not be recreated.
includedir /etc/krb5.conf.d/

[logging]
    default = FILE:/var/log/krb5libs.log
    kdc = FILE:/var/log/krb5kdc.log
    admin_server = FILE:/var/log/kadmind.log

[libdefaults]
    dns_lookup_realm = false
    ticket_lifetime = 24h
    renew_lifetime = 7d
    forwardable = true
    rdns = false
    pkinit_anchors = FILE:/etc/pki/tls/certs/ca-bundle.crt
    spake_preauth_groups = edwards25519
    default_realm = GNULAB.ORG
    default_ccache_name = KEYRING:persistent:%{uid}

[realms]
 GNULAB.ORG = {
     kdc = koji.gnulab.org
     admin_server = koji.gnulab.org
 }

[domain_realm]
 .gnulab.org = GNULAB.ORG
 gnulab.org = GNULAB.ORG
</code></pre></div>
Where GNULAB.ORG is your realm
* Create kerberos DB and create your super secrete password for the DB:
<code>kdb5_util create -s</code>
* Edit kerberos ACL <strong>/var/kerberos/krb5kdc/kadm5.acl</strong> to look as follows:
<div class="highlight"><pre><span></span><code>*/admin@GNULAB.ORG  *
</code></pre></div>
* Create the local admin:
<code>kadmin.local -q "addprinc admin/admin"</code>
* Start you services:
<code>systemctl enable krb5kdc --now &amp;&amp; systemctl enable kadmin --now</code></p>
<h2 id="the-principles">The principles<a class="headerlink" href="#the-principles" title="Permanent link">&para;</a></h2>
<p>koji needs few principles in kerberos for authentication as follows:</p>
<ul>
<li>host/kojihub@GNULAB.ORG: Used by the koji-hub server when communicating with the koji client</li>
<li>HTTP/kojiweb@GNULAB.ORG: Used by the koji-web server when performing a negotiated Kerberos authentication with a web browser. This is a service principal for Apache’s mod_auth_gssapi.</li>
<li>koji/kojiweb@GNULAB.ORG: Used by the koji-web server during communications with the koji-hub. This is a user principal that will authenticate koji-web to Kerberos as “koji/kojiweb@GNULAB.ORG”. Koji-web will proxy the mod_auth_gssapi user information to koji-hub (the ProxyPrincipals koji-hub config option).</li>
<li>koji/kojira@GNULAB.ORG: Used by the kojira server during communications with the koji-hub</li>
<li>compile/builder1.gnulab.org@GNULAB.ORG: Used on builder1 to communicate with the koji-hub. This is a user principal that will authenticate koji-builder to Kerberos as “compile/builder1.gnulab.org@GNULAB.ORG”. Each builder host will have its own unique Kerberos user principal to authenticate to the hub.</li>
<li>snagy@GNULAB.ORG: for my testing and package owner</li>
<li>HTTP/koji.gnulab.org@GNULAB.ORG: to allow the client to use HTTP "I am not sure"</li>
</ul>
<p>And we can start creating the needed principles:
* run <code>kadmin.local</code> then the following:
<div class="highlight"><pre><span></span><code>addprinc host/kojihub@GNULAB.ORG
addprinc HTTP/kojiweb@GNULAB.ORG
addprinc koji/kojiweb@GNULAB.ORG
addprinc koji/kojira@GNULAB.ORG
addprinc HTTP/koji.gnulab.org@GNULAB.ORG
addprinc snagy@GNULAB.ORG
addprinc kojiadmin@GNULAB.ORG
</code></pre></div></p>
<ul>
<li>Now we will need to create keytab, keytab is used for non-password auth, also I guess once you do that, you won't be able to use passwords, but that is okay since most of those are services principals, not that you can use multiple files if you need to, run <code>kadmin.local</code> and then:
<div class="highlight"><pre><span></span><code>    ktadd   -k /etc/koji.keytab host/kojihub@GNULAB.ORG
    ktadd   -k /etc/koji.keytab HTTP/kojiweb@GNULAB.ORG
    ktadd   -k /etc/koji.keytab koji/kojira@GNULAB.ORG
    ktadd   -k /etc/koji.keytab koji/kojiweb@GNULAB.ORG
    ktadd   -k /etc/koji.keytab HTTP/koji.gnulab.org@GNULAB.ORG
</code></pre></div></li>
<li>Validation done by running <code>klist -k -t /etc/koji.keytab</code></li>
<li>Run change permissions: <code>chmod 644 /etc/koji.keytab</code>
<div class="highlight"><pre><span></span><code>root# klist -k -t /etc/koji.keytab
Keytab name: FILE:/etc/koji.keytab
KVNO Timestamp           Principal
---- ------------------- ------------------------------------------------------
   2 12/19/2020 15:00:53 koji/kojira@GNULAB.ORG
   2 12/19/2020 15:00:53 koji/kojira@GNULAB.ORG
   2 12/19/2020 15:01:08 koji/kojiweb@GNULAB.ORG
   2 12/19/2020 15:01:08 koji/kojiweb@GNULAB.ORG
   2 12/19/2020 15:01:14 HTTP/kojiweb@GNULAB.ORG
   2 12/19/2020 15:01:14 HTTP/kojiweb@GNULAB.ORG
   2 12/19/2020 15:01:20 host/kojihub@GNULAB.ORG
   2 12/19/2020 15:01:20 host/kojihub@GNULAB.ORG
   2 12/19/2020 15:38:52 HTTP/koji.gnulab.org@GNULAB.ORG
   2 12/19/2020 15:38:52 HTTP/koji.gnulab.org@GNULAB.ORG
</code></pre></div></li>
</ul>
<h1 id="setting-up-koji-echosystem">Setting up koji echosystem<a class="headerlink" href="#setting-up-koji-echosystem" title="Permanent link">&para;</a></h1>
<p>We will start by setting up the DB, koji-hub, kojiweb and then kojira</p>
<h2 id="the-database">The Database<a class="headerlink" href="#the-database" title="Permanent link">&para;</a></h2>
<p>On the main server koji.gnulab.org, do the following:
* We need to install postgreqsl: <code>dnf install postgresql-server -y</code>
* Init postgresql db: <code>postgresql-setup --initdb --unit postgresql</code>
* Start the service: <code>systemctl enable postgresql --now</code>
* Adding Koji user:
<div class="highlight"><pre><span></span><code>useradd koji
passwd koji
</code></pre></div>
and set a random complex password
* Lets create koji DB user:
<div class="highlight"><pre><span></span><code>su - postgres
createuser --no-superuser --no-createrole --no-createdb koji
createdb -O koji koji
psql -c &quot;alter user koji with encrypted password &#39;mysupercomplexpassword&#39;;&quot;
</code></pre></div>
* Let's setup koji: <code>dnf install koji -y</code>
* load the DB into postgresql:
    <code>su - koji
  psql koji koji &lt; /usr/share/doc/koji*/docs/schema.sql</code>
* Postgresql permissions
Since my koji server lives with the postgresql, I am using socket communication instead of TCP/IP
* Edit <strong>/var/lib/pgsql/data/pg_hba.conf</strong> as follows "Order is important":
<div class="highlight"><pre><span></span><code># &quot;local&quot; is for Unix domain socket connections only
local   koji        koji                    trust
local   all             all                                     peer
</code></pre></div>
* Reload postgresql: <code>systemctl reload postgresql</code>
* Create koji authenticiation for kerberos:
<div class="highlight"><pre><span></span><code>su - koji

psql &lt;&lt;EOF
with user_id as (
insert into users (name, status, usertype) values (&#39;kojiadmin&#39;, 0, 0) returning id
)
insert into user_krb_principals (user_id, krb_principal) values (
(select id from user_id),
&#39;kojiadmin@GNULAB.ORG&#39;);
EOF
</code></pre></div>
* Give the user admin permissions:
<div class="highlight"><pre><span></span><code>    su - koji
    psql
    koji=&gt; select * from users;
    koji=&gt; insert into user_perms (user_id, perm_id, creator_id) values (&quot;id of user inserted above&quot;, 1, &quot;id of user inserted above&quot;);
</code></pre></div></p>
<h2 id="mntkoji-and-nfs">/mnt/koji and NFS<a class="headerlink" href="#mntkoji-and-nfs" title="Permanent link">&para;</a></h2>
<ul>
<li>Create the koji file system skeleton:</li>
<li>Setup NFS and apache : <code>dnf install nfs-utils httpd -y</code>
<div class="highlight"><pre><span></span><code>cd /mnt
mkdir koji
cd koji
mkdir {packages,repos,work,scratch,repos-dist}
chown apache.apache *
</code></pre></div></li>
<li>Start the service: <code>systemctl enable --now nfs-server</code></li>
<li>Edit <strong>/etc/exports</strong> as follows:
<div class="highlight"><pre><span></span><code>/mnt/koji 10.10.10.3(ro,sync,no_all_squash,root_squash)
</code></pre></div></li>
<li>Export the filesystem: <code>exportfs -ra</code></li>
<li>View current state: <code>exportfs -v</code></li>
<li>On the client install the NFS client packages: <code>dnf install nfs-utils nfs4-acl-tools -y</code></li>
<li>Create the local dir: <code>mkdir /mnt/koji</code></li>
<li>Mount the NFS: <code>mount -t nfs 10.10.10.2:/mnt/koji /mnt/koji</code></li>
</ul>
<h2 id="kojihub">Kojihub<a class="headerlink" href="#kojihub" title="Permanent link">&para;</a></h2>
<ul>
<li>Install kojihub <code>dnf install koji-hub mod_ssl -y</code></li>
<li>Enable postgresql sweep function: <code>systemctl enable --now koji-sweep-db.timer</code></li>
<li>Enable kerberos auth in <strong>/etc/httpd/conf.d/kojihub.conf</strong> by uncomment the section below as follows:
<div class="highlight"><pre><span></span><code># uncomment this to enable authentication via GSSAPI
 &lt;Location /kojihub/ssllogin&gt;
         AuthType GSSAPI
         AuthName &quot;GSSAPI Single Sign On Login&quot;
         GssapiCredStore keytab:/etc/koji.keytab
         Require valid-user
 &lt;/Location&gt;
</code></pre></div></li>
<li>koji-hub configurations as follows in <strong>/etc/koji-hub/hub.conf</strong>:
<div class="highlight"><pre><span></span><code>[hub]

DBName = koji
DBUser = koji
KojiDir = /mnt/koji
AuthPrincipal = host/kojihub@GNULAB.ORG
AuthKeytab = /etc/koji.keytab
ProxyPrincipals = koji/kojiweb@GNULAB.ORG
HostPrincipalFormat = compile/%s@GNULAB.ORG
LoginCreatesUser = On
KojiWebURL = https://koji.gnulab.org/koji
NotifyOnSuccess = True
</code></pre></div></li>
<li>Install selinux policyutils: <code>dnf install policycoreutils-python-utils -y</code></li>
<li>Lets fix some selinux stuff:
<div class="highlight"><pre><span></span><code>    setsebool -P allow_httpd_anon_write=1
    setsebool -P httpd_can_network_connect 1
    setsebool -P httpd_use_nfs=1
    semanage fcontext -a -t public_content_rw_t &quot;/mnt/koji(/.*)?&quot;
    restorecon -r -v /mnt/koji
  ```
## Configure koji cli client
* edit **/etc/koji.conf** as follows:
</code></pre></div>
[koji]</li>
</ul>
<p>server = https://koji.gnulab.org/kojihub
weburl = https://koji.gnulab.org/koji
topurl = https://koji.gnulab.org/
topdir = /mnt/koji
authtype = kerberos
krb_rdns = false
plugins = runroot
use_fast_upload = yes
<div class="highlight"><pre><span></span><code>* restart httpd: ```systemctl restart httpd```
* Test by running the following on koji server:
    * kinit -p kojiadmin@GNULAB.ORG
    * koji moshimoshi
</code></pre></div>
[root@koji ~]# kinit -p kojiadmin@GNULAB.ORG
Password for kojiadmin@GNULAB.ORG:
[root@koji ~]# koji moshimoshi
hylô, kojiadmin!</p>
<p>You are using the hub at https://koji.gnulab.org/kojihub
Authenticated via GSSAPI
<div class="highlight"><pre><span></span><code>## Kojiweb
* Install kojiweb: ```dnf install koji-web -y```
* Edit **/etc/httpd/conf.d/kojiweb.conf** to allow kerberos:
</code></pre></div></p>
<h1 id="uncomment-this-to-enable-authentication-via-kerberos">uncomment this to enable authentication via Kerberos<a class="headerlink" href="#uncomment-this-to-enable-authentication-via-kerberos" title="Permanent link">&para;</a></h1>
<p><Location /koji/login>
     AuthType GSSAPI
     AuthName "Koji Web UI"
     GssapiCredStore keytab:/etc/koji.keytab
     Require valid-user
     ErrorDocument 401 /koji-static/errors/unauthorized.html
 </Location></p>
<p><div class="highlight"><pre><span></span><code>* Edit Kojiweb configuration **/etc/kojiweb/web.conf**
</code></pre></div>
[web]
SiteName = koji</p>
<p>KojiHubURL = https://koji.gnulab.org/kojihub
KojiFilesURL = https://koji.gnulab.org/kojifiles</p>
<p>WebPrincipal = koji/kojiweb@GNULAB.ORG
WebKeytab = /etc/koji.keytab
WebCCache = /var/tmp/kojiweb.ccache
KrbService = koji.gnulab.org
KrbServerRealm = GNULAB.ORG
LoginTimeout = 72
Secret = asdasdf12313ewdasfq234f
LibPath = /usr/share/koji-web/lib
LiteralFooter = True
<div class="highlight"><pre><span></span><code>* restart apache: ```systemctl reload httpd```
## Setting up the builder / kojid / koji-builder
This will configuration will be on the building node(s)

* Install koji-builder: ```dnf install koji-builder -y```
* Edit **/etc/kojid/kojid.conf** as follows:
</code></pre></div>
[kojid]</p>
<p>topdir=/mnt/koji
workdir=/tmp/koji
server=https://koji.gnulab.org/kojihub
topurl=https://koji.gnulab.org/kojifiles
; those are for building package from git.c.o and Mustafa's git
allowed_scms=git.centos.org:/<em>:off:get_sources.sh gitlab.rockylinux.bycrates.org:/</em>:off:/bin/sh,/usr/bin/srpmproc_wrapper
host_principal_format=compile/%s@GNULAB.ORG
<div class="highlight"><pre><span></span><code>On koji main server, run the following commands:
* Add the new builder:  ```koji add-host builder1.gnulab.org  x86_64```
* Add the createrepo channel: ```koji add-host-to-channel builder1.gnulab.org createrepo```
* I did adjust the capacity since it is a small machine: ```koji edit-host --capacity=8 builder1.gnulab.org```
* Note, by default kojid uses DNS to talk to koji-hub, so you need to have SRV record in your DNS as follows:
</code></pre></div>
_kerberos._udp    IN SRV  10 100 88 kerberos.GNULAB.ORG.
<div class="highlight"><pre><span></span><code>* Kojid looks for **/etc/kojid/kojid.keytab** by default, so you need to create a file with compile principle as above and place it in the right location on builder node(s)
</code></pre></div>
kadmin.local
addprinc compile/builder1.gnulab.org@GNULAB.ORG
ktadd -k /tmp/kojid.keytab compile/builder1.gnulab.org@GNULAB.ORG
<div class="highlight"><pre><span></span><code>On the builder node, restart kojid: ```systemctl enable kojid --now```

## Kojira

* Install koji-utils: ```dnf install koji-utils -y```
* Add kojira user and give it permission for repo
</code></pre></div>
koji add-user koji/kojira
koji grant-permission repo koji/kojira
<div class="highlight"><pre><span></span><code>* Edit **/etc/kojira/kojira.conf** as following:
</code></pre></div>
[kojira]</p>
<p>server=https://koji.gnulab.org/kojihub
topdir=/mnt/koji
logfile=/var/log/kojira.log
principal = koji/kojira@GNULAB.ORG
keytab = /etc/koji.keytab
<div class="highlight"><pre><span></span><code>* Start Kojira service: ```systemctl enable kojira --now```

# Koji bootstrapping

I went with the external repo method to bootstrap the setup, so I added external repos and create the following tags and targets, this work is based on: https://docs.pagure.org/koji/external_repo_server_bootstrap/

On the main node, run the following:
* Add your final dist tag: ```koji add-tag dist-rocky8```
* Create the build tag:
```koji add-tag --parent dist-rocky8 --arches &quot;x86_64&quot; -x mock.yum.module_hotfixes=1 dist-rocky8-build```

* Add the external repos, I hard coded the ARCH, but you can use \$arch instaed of x86_64 in the repo URL:
</code></pre></div>
koji add-external-repo -m bare -t dist-rocky8-build centos-8-baseos-external http://mirror.centos.org/centos-8/8.3.2011/BaseOS/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-appstream-external http://mirror.centos.org/centos-8/8.3.2011/AppStream/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-devel-external http://mirror.centos.org/centos-8/8.3.2011/Devel/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-ha-external http://mirror.centos.org/centos-8/8.3.2011/HighAvailability/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-pt-external http://mirror.centos.org/centos-8/8.3.2011/PowerTools/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-cp-external http://mirror.centos.org/centos-8/8.3.2011/centosplus/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-cr-external http://mirror.centos.org/centos-8/8.3.2011/cr/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-extras-external http://mirror.centos.org/centos-8/8.3.2011/extras/\$arch/os/
koji add-external-repo -m bare -t dist-rocky8-build centos-8-fasttrack-external http://mirror.centos.org/centos-8/8.3.2011/fasttrack/\$arch/os
koji add-external-repo -m bare -t dist-rocky8-build centos-8-debuginfo-external http://debuginfo.centos.org/8/\$arch/
<div class="highlight"><pre><span></span><code>* I also created a small package for centospkg-minimal and srpmproc and create local repo, so adding that too:
</code></pre></div>
koji add-external-repo -m bare -t dist-rocky8-build centos-8-local-repo-external https://koji.gnulab.org/localrepo/\$arch/
<div class="highlight"><pre><span></span><code>* Add the targets: ```koji add-target dist-rocky8 dist-rocky8-build dist-rocky8```
* Create the bootstrapping groups for build and srpm-build
</code></pre></div>
koji add-group dist-rocky8-build build
koji add-group dist-rocky8-build srpm-build
<div class="highlight"><pre><span></span><code>* Add the bootstrapping packages:
</code></pre></div>
koji add-group-pkg dist-rocky8-build build bash buildsys-macros-el8 bzip2 centos-release centpkg-minimal coreutils cpio diffutils findutils gawk gcc gcc-c++ grep gzip info make module-build-macros patch redhat-rpm-config rpm-build scl-utils-build sed shadow-utils tar unzip util-linux which xz git srpmproc
koji add-group-pkg dist-rocky8-build srpm-build bash buildsys-macros-el8 centos-release centpkg-minimal git redhat-rpm-config rpm-build scl-utils-build shadow-utils system-release srpmproc
<div class="highlight"><pre><span></span><code>* Regenerating the repos ```koji regen-repo dist-rocky8-build```

# Running a test

I ran the following test to build package from git.centos.org:

```koji add-user snagy```
```koji add-pkg --owner snagy dist-rocky8 python36``` &quot;need to check if this is needed&quot;
</code></pre></div>
koji build dist-rocky8 'git+https://git.centos.org/git/rpms/python36.git?#f900ab6403fbd9c22e59f5d463fee210b3278fb3'
```
*  Results at: https://koji.gnulab.org/koji/taskinfo?taskID=321</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    2025-07-20
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Rocky Enterprise Software Foundation
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.integrate", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
  <script defer data-domain="wiki.rockylinux.org" data-api="https://img.resf.workers.dev/img/event" src="https://img.resf.workers.dev/js/script.js"></script>
  
      <script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    

  </body>
</html>